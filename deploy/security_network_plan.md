# 网络和安全配置方案

## 1. 网络配置

### 1.1 数据库服务器 (192.168.101.13)
- MySQL服务监听3306端口
- 仅允许来自计算服务器(192.168.101.9)的连接
- 配置防火墙规则限制访问

### 1.2 计算服务器 (192.168.101.9)
- 应用服务监听8000端口(后端API)
- 前端服务监听8080端口(Nginx)
- 可对外网开放访问，或通过反向代理服务器提供服务

## 2. 安全配置

### 2.1 数据库安全
- 使用强密码策略
  - root用户密码: 1qaz@wsx
  - 普通用户(feishu_user)密码: feishu_password
- 限制用户权限
  - root用户仅限本地访问
  - feishu_user仅允许从计算服务器IP(192.168.101.9)连接
  - feishu_user仅授予对feishu_task_db数据库的必要权限

### 2.2 应用安全
- 飞书应用凭证保护
  - FEISHU_APP_ID, FEISHU_APP_SECRET等敏感信息通过环境变量传递
  - 不在代码或配置文件中硬编码
- HTTPS支持（可选）
  - 在前端Nginx配置中启用SSL
  - 使用Let's Encrypt或其他证书颁发机构获取SSL证书

### 2.3 网络安全
- 防火墙配置
  - 数据库服务器: 仅开放22(SSH)和3306(MySQL)端口
  - 计算服务器: 开放22(SSH)、8000(应用)和8080(前端)端口
- 使用VPN或专用网络（推荐）
  - 在生产环境中，建议将两台服务器置于专用网络中
  - 通过VPN访问服务器管理接口

### 2.4 数据传输安全
- 数据库连接加密（可选）
  - 配置MySQL启用SSL连接
  - 在应用中使用加密连接字符串

## 3. 访问控制

### 3.1 SSH访问
- 使用SSH密钥认证而非密码认证
- 限制SSH访问用户
- 配置sudo权限控制

### 3.2 数据库访问
- 创建专用数据库用户
- 限制用户权限范围
- 定期更换密码

## 4. 监控和日志

### 4.1 网络监控
- 监控服务器间的网络连通性
- 监控端口访问情况

### 4.2 安全日志
- 启用并定期检查SSH登录日志
- 启用并定期检查MySQL错误日志和慢查询日志
- 应用程序日志记录数据库访问错误

## 5. 备份和恢复

### 5.1 网络配置备份
- 备份防火墙规则
- 备份网络配置文件

### 5.2 安全配置备份
- 备份SSH配置
- 备份数据库用户权限配置